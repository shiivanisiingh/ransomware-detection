<!DOCTYPE html>
<html>
<head>
    <title>Cryptocurrency Transaction Monitoring System</title>
    <style>
        body {font-family: Arial, sans-serif; max-width: 800px; margin: 20px auto}
        pre {background: #f8f9fa; padding: 15px; border-radius: 5px}
        .cost-table {border-collapse: collapse; margin: 20px 0}
        .cost-table td, .cost-table th {border: 1px solid #ddd; padding: 8px}
    </style>
</head>
<body>
    <h1>Financial Crime Detection System</h1>
    
    <h2>Business Context: Cryptocurrency Exchange</h2>
    <p><strong>Perspective:</strong> Chief Risk Officer at a major crypto exchange<br>
    <strong>Objective:</strong> Detect ransomware payments in Bitcoin transactions while minimizing business disruption</p>

    <h3>Error Type Consequences</h3>
    <table class="cost-table">
        <tr>
            <th>Error Type</th>
            <th>Definition</th>
            <th>Cost Impact</th>
        </tr>
        <tr>
            <td>False Positive</td>
            <td>Legitimate transaction flagged as suspicious</td>
            <td>$150 investigation cost + customer friction</td>
        </tr>
        <tr>
            <td>False Negative</td>
            <td>Ransomware payment undetected</td>
            <td>$1.5M avg. ransom + $500k regulatory fines</td>
        </tr>
    </table>

    <h3>Cost Ratio Justification (1:100 FP:FN)</h3>
    <p>Based on 2023 industry data:
    <ul>
        <li>Average ransomware payment: $1.5M (Chainalysis Report)</li>
        <li>Typical investigation cost: $150 per alert</li>
        <li>Regulatory fine multiplier: 3× illicit transaction value</li>
    </ul>
    <em>Financial impact ratio:</em> ($1.5M + $500k) / $150 = 13,333 → Rounded to 1:100 for model stability</p>

    <h2>Implementation Code</h2>
    <pre><code>
# Transaction monitoring system core
import pandas as pd
import numpy as np
from sklearn.impute import SimpleImputer
from sklearn.preprocessing import StandardScaler
from sklearn.feature_selection import VarianceThreshold
from sklearn.linear_model import LogisticRegression
from sklearn.model_selection import StratifiedKFold
from imblearn.over_sampling import SMOTE
from sklearn.calibration import CalibratedClassifierCV

# Load transaction data
data = pd.read_csv('BitcoinHeistData.csv')

# Convert to binary labels
data['label'] = np.where(data['label'] == 'white', 0, 1)
y = data['label'].astype(int)
X = data.drop(columns=['label', 'address'])

# Preprocessing pipeline
X_processed = StandardScaler().fit_transform(
    VarianceThreshold(threshold=0).fit_transform(
        SimpleImputer(strategy='median').fit_transform(X)
    )
)

# Conditional resampling
if y.mean() < 0.05:
    X_resampled, y_resampled = SMOTE(sampling_strategy=0.5).fit_resample(X_processed, y)
else:
    X_resampled, y_resampled = X_processed.copy(), y.copy()

# Cost-optimized threshold finder
def calculate_cost(y_true, y_pred):
    """FP:FN = 1:100 based on financial impact analysis"""
    fp = np.sum((y_pred == 1) & (y_true == 0))
    fn = np.sum((y_pred == 0) & (y_true == 1))
    return 100 * fp + 10000 * fn

# ... rest of original threshold optimization code ...
    </code></pre>

    <h3>Operational Implementation</h3>
    <p>When probability ≥ optimal threshold (e.g., 0.28):</p>
    <ol>
        <li>Automatically freeze transaction</li>
        <li>Notify financial crime investigation team</li>
        <li>Initiate regulatory reporting workflow</li>
    </ol>
</body>
</html>
