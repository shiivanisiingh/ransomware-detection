<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bitcoin Ransomware Detection System</title>
    <style>
        :root { --primary: #2c3e50; --secondary: #3498db; --background: #f8f9fa; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; 
              line-height: 1.6; margin: 0 auto; padding: 20px; max-width: 800px; }
        pre { background: var(--background); padding: 1em; overflow-x: auto; border-radius: 3px; }
        .keyword { color: #d73a49; } .string { color: #032f62; } .comment { color: #6a737d; }
    </style>
</head>
<body>
    <h1>üîç Bitcoin Ransomware Detection System</h1>

    <!-- Full Code Implementation -->
    <h2>Complete Python Implementation</h2>
    <pre><code>
<span class="keyword">import</span> pandas <span class="keyword">as</span> pd
<span class="keyword">import</span> numpy <span class="keyword">as</span> np
<span class="keyword">from</span> sklearn.impute <span class="keyword">import</span> SimpleImputer
<span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler
<span class="keyword">from</span> sklearn.feature_selection <span class="keyword">import</span> VarianceThreshold
<span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LogisticRegression
<span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> StratifiedKFold
<span class="keyword">from</span> imblearn.over_sampling <span class="keyword">import</span> SMOTE
<span class="keyword">from</span> sklearn.calibration <span class="keyword">import</span> CalibratedClassifierCV

<span class="comment"># --- Your Original Code Starts ---</span>
<span class="keyword">def</span> calculate_cost(y_actual, y_pred):
    <span class="string">"""Custom cost function with FP:FN = 1:100 ratio"""</span>
    FP = np.sum((y_pred == 1) & (y_actual == 0))
    FN = np.sum((y_pred == 0) & (y_actual == 1))
    <span class="keyword">return</span> 100 * FP + 1000 * FN

<span class="comment"># Load data from repository's /data directory</span>
<span class="keyword">try</span>:
    data = pd.read_csv(<span class="string">'data/BitcoinHeistData.csv'</span>)
<span class="keyword">except</span> FileNotFoundError:
    <span class="keyword">raise</span> ValueError(<span class="string">"Dataset missing: Place CSV in /data directory"</span>)

<span class="comment"># Binary label conversion</span>
data[<span class="string">'label'</span>] = np.where(data[<span class="string">'label'</span>] == <span class="string">'white'</span>, 0, 1)
y = data[<span class="string">'label'</span>].astype(int)
X = data.drop(columns=[<span class="string">'label'</span>, <span class="string">'address'</span>])

<span class="comment"># Preprocessing pipeline</span>
X_processed = StandardScaler().fit_transform(
    VarianceThreshold(threshold=0).fit_transform(
        SimpleImputer(strategy=<span class="string">'median'</span>).fit_transform(X)
    )
)

<span class="comment"># Adaptive SMOTE application</span>
<span class="keyword">if</span> y.mean() < 0.05:
    X_resampled, y_resampled = SMOTE(sampling_strategy=0.5).fit_resample(X_processed, y)
<span class="keyword">else</span>:
    X_resampled, y_resampled = X_processed.copy(), y.copy()

<span class="comment"># Stratified K-Fold setup</span>
skf = StratifiedKFold(n_splits=10, shuffle=True, random_state=1)
fold_vec = np.zeros(len(y_resampled), dtype=int)

<span class="keyword">for</span> fold_num, (_, test_idx) <span class="keyword">in</span> enumerate(skf.split(X_resampled, y_resampled)):
    fold_vec[test_idx] = fold_num + 1

<span class="comment"># Threshold optimization</span>
thresholds = np.linspace(0.01, 0.99, 100)
out = np.zeros((100, 10))

<span class="keyword">for</span> i <span class="keyword">in</span> range(10):
    test_mask = (fold_vec == i+1)
    X_train, X_test = X_resampled[~test_mask], X_resampled[test_mask]
    y_train, y_test = y_resampled[~test_mask], y_resampled[test_mask]
    
    <span class="keyword">if</span> len(np.unique(y_train)) < 2:
        <span class="keyword">continue</span>

    model = CalibratedClassifierCV(LogisticRegression(), method=<span class="string">'sigmoid'</span>)
    model.fit(X_train, y_train)
    proba = model.predict_proba(X_test)[:, 1]
    
    <span class="keyword">for</span> j <span class="keyword">in</span> range(100):
        pred = (proba >= thresholds[j]).astype(int)
        out[j, i] = calculate_cost(y_test, pred)

<span class="comment"># Results calculation</span>
mean_costs = np.nanmean(out, axis=1)
best_idx = np.nanargmin(mean_costs)
best_threshold = thresholds[best_idx]

print(f<span class="string">"Optimal Threshold: {best_threshold:.3f}"</span>)
print(f<span class="string">"Associated Cost: ${mean_costs[best_idx]:,.2f}"</span>)
<span class="comment"># --- Your Original Code Ends ---</span>
    </code></pre>

    <!-- GitHub Deployment -->
    <h2>üöÄ GitHub Setup Instructions</h2>
    <ol>
        <li>Create repository: <code>bitcoin-ransomware-detection</code></li>
        <li>File structure:
            <pre>
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îî‚îÄ‚îÄ BitcoinHeistData.csv  <span class="comment"># Add your dataset</span>
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îî‚îÄ‚îÄ index.html            <span class="comment"># This file</span>
‚îî‚îÄ‚îÄ .gitignore                <span class="comment"># Exclude large data files</span>
            </pre>
        </li>
        <li>Enable GitHub Pages: <em>Settings > Pages > Source: docs/</em></li>
    </ol>
</body>
</html>
